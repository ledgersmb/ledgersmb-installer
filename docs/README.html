<!DOCTYPE html>
<html>
  <head>
    <title>Documentation - ledgersmb-installer</title>
    <style>
      .todo {
          color: red;
      }
      body {
          font-family: sans-serif;
          margin: 0 auto;
          min-width: 80 ex;
          width: 100ex;
          border-left: 1px solid darkgrey;
          border-right: 1px solid darkgrey;
          padding: 2em;
      }
      dl {
          margin-left: 40px;
      }
      dt:first-child {
          margin-top: initial;
      }
      dt {
          font-weight: bold;
          margin-top: 0.5em;
      }
      dt.default {
          font-style: italic;
          text-decoration: underline;
      }
      code {
          background-color: #e0e0e0;
          font-family: Monaco, monospace;
      }
      code.block {
          display: block;
          margin: 0 20px;
          padding: 1em;
      }
    </style>
  </head>
  <body>
    <h1>Documentation - ledgersmb-installer</h1>


    <h2>Contents</h2>
    <ol>
      <li><a href="#quickstart">Quickstart</a></li>
      <li><a href="#overview">Overview</a></li>
      <li><a href="#download">Download</a></li>
      <li><a href="#commands">Commands</a></li>
      <li><a href="#options">Options</a></li>
      <li><a href="#bugs">Bugs and questions</a></li>
    </ol>


    <h2 id="quickstart">Quickstart</h2>
    <p>To install LedgerSMB 1.12.1 with all the default options, run:</p>
    <code class="block">
      $ curl -s -o ledgersmb-installer -L https://get.ledgersmb.org/ledgersmb-installer <br />
      $ chmod +x ledgersmb-installer <br />
      $ ./ledgersmb-installer install 1.12.1
    </code>
    <p>You'll want to change <em>1.12.1</em> with the latest version</p>


    <h2 id="overview">Overview</h2>
    <p>
      The installer supports installation of LedgerSMB on a wide range of
      operating systems. Additionally, when the installer is allowed to
      install system libraries, it will choose to install the system
      packages through the system's package manager, if it knows how to.
      Currently supported are:
    </p>
    <ul>
      <li>Linux
        <ul>
          <li>Debian (apt-get; including non-system Perl)</li>
        </ul>
      </li>
    </ul>
    <p>Other operating systems my be supported if all build and runtime
      dependencies are satisfied before starting the installation.</p>

    <h3 id="dependency-installation">Dependency installation</h3>
    <p>Modules that are not available as system packages will be
      installed from <a href="https://metacpan.org">CPAN</a> distributions.
      Platforms without package manager support (including non-system Perl
      installations) will install <em>all</em> dependencies from CPAN.</p>
    <p>Libraries which can be installed from CPAN will be installed when
      missing (e.g. libxml2). Especially the libpq5 (PostgreSQL client library)
      cannot be installed by the installer if it's not available as a system
      package. On systems without package manager support, this dependency needs
      to exist on the system before starting the installation.</p>

    <h3 id="registering-bugs">Bugs</h3>
    <p>Please file bugs or enhancement ideas
      <a href="https://github.com/ledgersmb/ledgersmb-installer/issues">on GitHub</a>.</p>


    <h2 id="download">Installer download</h2>
    <p>Download the installer and make it executable using these commands:</p>
    <code class="block">
      $ curl -s -o ledgersmb-installer -L https://get.ledgersmb.org/ledgersmb-installer <br />
      $ chmod +x ledgersmb-installer
    </code>
    <p>Or, download the content of https://get.ledgersmb.org/ledgersmb-installer using your
      favorite browser.</p>


    <h2 id="commands">Commands</h2>
    <dl>
      <dt><code>ledgersmb-installer install [options]</code></dt>
      <dd>Installs the indicated LedgerSMB version, building on the host
        operating system provided packages, on supported platforms.</dd>

      <dt><code>ledgersmb-installer compute [options] &lt;version&gt;</code></dt>
      <dd>Computes the mapping of Perl module dependencies to their
        distribution package equivalents.</dd>

<!--      <dt>download</dt>
      <dd>Downloads the indicated LedgerSMB tarball and signature, verifying
        the signature after download.</dd>-->

      <dt><code>ledgersmb-installer system-id [options]</code></dt>
      <dd>Prints the identifier of the system. This identifier is used to name
        the file containing the mapping of the Perl modules to the system packages.</dd>

    </dl>


    <h2 id="options">Options</h2>


    <h3>General</h3>
    <p>Options applicable to all commands</p>
    <dl>
      <dt><code>--log-level=&lt;level&gt;</code></dt>
      <dd>Default value: <code>info</code><br />
        Available values (in increasing verbosity): <code>fatal</code>,
        <code>error</code>, <code>warning</code>, <code>info</code>,
        <code>debug</code> and <code>trace</code></dd>

      <dt><code>--[no-]prepare-env</code></dt>
      <dd>Default value: <span class="todo">(ask)</span><br />
        Enables installation of system tools required for installation of Perl packages,
        such as <code>make</code> and <code>gcc</code>. Additional dependencies may
        apply based on <code>--compute-packages</code>. Installed dependencies are removed
        after installation. This may be prevented using <code>--no-uninstall-env</code></dd>

      <dt><code>--target=&lt;path&gt;</code></dt>
      <dd>Default value: <code>./ledgersmb/</code><br />
        The path to use to unpack the release tarball; used with the
        <code>install</code> <em>and</em> <code>compute</code> commands</dd>

      <dt class="todo"><code>--[no-]verify-sig</code></dt>
      <dd>Default value: <code>--no-verify-sig</code><br />
        Use <code>gpg</code> to verify the release signature of the downloaded tarball</dd>

      <dt><code>--[no-]uninstall-env</code></dt>
      <dd>Default value: <code>--uninstall-env</code><br />
        Uninstalls packages that were installed to prepare the environment for computation
        of the "Perl distribution to system package" mapping and the installation of
        Perl distributions from CPAN.</dd>

      <dt><code>--yes</code></dt>
      <dd>Automatically answer &quot;yes&quot; to installer questions, allowing
        non-interactive use. (Shorthand: <code>-y</code>)</dd>
    </dl>


    <h3 id="compute-options">compute</h3>
    <p>There are no options specific to this command.</p>


    <h3 id="install-options">install</h3>
    <dl>
      <dt class="todo"><code>--[no-]compute-packages</code></dt>
      <dd>Default value: <code>--compute-packages</code><br />
        Enables computing the mapping of Perl dependencies to system packages, if no
        mapping could be downloaded from the precomputed repository. This behaviour is
        only supported when a supported package manager could be detected.</dd>

      <dt><code>--local-lib=&lt;path&gt;</code></dt>
      <dd>Default value: <code>local</code><br />
        The location to install modules from CPAN;
        relative values are expanded relative to the <code>target</code> path.</dd>

      <dt><code>--[no-]system-packages</code></dt>
      <dd>Default value: <code>--system-packages</code> if running as a user with package
        installation rights (usually <code>root</code>).</dd>

      <dt><code>--version=&lt;version&gt;</code></dt>
      <dd>Default value: <code>--version=latest</code><br />
        Specifies which version to install, or retrieves the version number of the
        latest release from GitHub.</dd>

      <dt>
    </dl>


    <h3 id="system-id-options">system-id</h3>
    <p>There are no options specific to this command.</p>

    <h2 id="bugs"></h2>

    <p>The project is hosted on GitHub, as part of the <a href="https://github.com/ledgersmb">
        LedgerSMB organization</a>. Please file any bugs you run into <a href="https://github.com/ledgersmb/ledgersmb-installer/issues/new?template=bug_report.md">
        using the provided template</a>.
    </p>

    <p>For improvement ideas, general questions and other conversations, please use
      <a href="https://github.com/ledgersmb/ledgersmb-installer/discussions">GitHub Discussions</a>.</p>

  </body>
</html>
